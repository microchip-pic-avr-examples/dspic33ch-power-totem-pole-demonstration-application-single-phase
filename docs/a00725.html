<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>3.8/7.6 kw Totem pole Demonstration Application: Appendix to Operational Manual</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mchp.css" rel="stylesheet" type="text/css"/>
<link href="mchp_theme.css" rel="stylesheet" type="text/css"/>
<link href="search.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="border:0px; border-spacing: 0px; border-collapse: collapse; vertical-align: middle; width: 100%;">
    <tbody>
        <tr style="border: none; background-color: #00000000;">
            <!--SITE HEADER-->
            <td style="width: 120px; border: none;">
                <img alt="Bar" height="60px" src="images/mchp-brandingelement-rgb2.png"/>
            </td>
            <td style="width: 220px; border: none;">
                <img alt="Logo" height=50px src="images/microchip.png"/>
            </td>
            <td colspan="4" style="font-size: 16pt; font-weight: bolder;">
                3.8/7.6 kw Totem pole Demonstration Application (Part-No. (not specified)) 
            </td>
            <td style="text-align: right; vertical-align: middle;">
                        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
            </td>
            <!--END SITE HEADER-->
        </tr>
        <tr style="height:36px; border:none; background-color: #000000b0;">
            <td style="width: 70px; color: white; font-size:14px; font-weight: bolder; margin-left: 30px;">
                <div style="margin-left: 30px;">Content</div>
            </td>
            <td style="width: 10px; color: white; font-size:14px; font-weight: bolder;">
                &nbsp;
            </td>
            <td style="width: 100px; color: white; font-size:14px; font-weight: bolder;">
                <!-- Overview -->
            </td>
            <td style="width: 130px; color: white; font-size:14px; font-weight: bolder;"> 
                <!-- Documentation -->
            </td>
            <td style="width: 170px; color: white; font-size:14px; font-weight: bolder;"> 
                <!-- Additional Resources -->
            </td>
            <td style="width: auto; color: white; font-size:14px; font-weight: bolder;"> 
              &nbsp;
            </td>
            <td style="width: 310px; margin-right: 30px; color: white; font-size:10px; font-weight: lighter; text-align: right;">
                &nbsp;
            </td>
        </tr>
    </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('a00725.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Appendix to Operational Manual</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md27"></a></p>
<h2>AC_N/Charge Pump</h2>
<p><b>Y-Capacitors Common Mode Noise Challenge:</b></p>
<p>AC_N voltage alternates between Vout and PGND depending on AC polarity. <br  />
 During the positive half-wave, PWM_L_L1 is the active switch and PWM_L_N connects N to PGND. <br  />
 During the negative half-wave, PWM_H_L1 is the active switch and PWM_H_N connects N to Vout. <br  />
</p>
<p>The big issue here is re-distributing the charge between CY-PFC and CY-LOAD as we go from negative to positive AC (and also going from positive to negative AC) which results very large currents during switching, flowing in the common mode loop. This can cause EMI issues and also can cause distortion in the AC input current (between L and N) coming out of the zero crossing region.</p>
<p><b>How it works:</b> <br  />
 Current source formed operates in linear region. This will control the rate of charge re-distribution between the Y-caps. Note that the amount of time you need to turn this current source on for depends mainly on the Y-cap on the input side (assuming it is smaller than the Y-cap on the output side), as its all about charge re-distribution and this depends on the smallest Y-cap. Also Note that if measuring the potential between N and PGND for this proposed scheme (current sources to equalize charge on Y-caps until V(PE, PGND) = 0), we need to measure N at the point at which the wires connect to the board.</p>
<p><img src="images/chargepump.png" alt="Complete" title="Complete" class="inline"/></p>
<p><b>AC Input going from ZC to negative halfwave</b></p>
<p>The current source controlled by GPIO_Y_H charges the Y caps which are discharged to Vout before the PWM_H_L1 and PWM_H_N switches become active. With PWM_H_N the potential AC_N is connected to Vout so that this potential becomes close to Vout.</p>
<center> </center><center> <a href="images/Charge_pump.png" target="_blank" rel="nofollow"><img src="images/Charge_pump.png" alt="zerocross" width="800" class="inline"/> </a> &#160; <a href="images/charge_pump_marking.png" target="_blank" rel="nofollow"><img src="images/charge_pump_marking.png" alt="zerocross" width="800" class="inline"/> </a> </center> <p><b> </p><ol type="A">
<li>
Zero Cross Region Started </li>
<li>
Zero Cross Region Ended and charge pump started </li>
<li>
Charge pump ends and normal switching starts </li>
</ol>
<p></b>  </p>
<p><b>AC Input going from ZC to positive halfwave</b></p>
<p>The current source controlled by GPIO_Y_L discharges the y caps which are charged to Vout before the PWM_L_L1 and PWM_L_N switches become active. With PWM_L_N the potential AC_N is connected to PGND so that this potential becomes close to 0V.</p>
<div class="fragment"><div class="line">Polarity = positive</div>
<div class="line">AC_N falls to 0V</div>
<div class="line"> </div>
<div class="line">AC_N &gt; 13V -&gt; ON</div>
<div class="line">AC_N &lt; 13V -&gt; OFF</div>
</div><!-- fragment --><p><a href="images/charge_pump_neg.png" target="_blank" rel="nofollow"><img src="images/charge_pump_neg.png" alt="zerocross" width="800" class="inline"/> </a> </p>
<p><b>AC_N Level Check to Switch ON/OFF Current Source</b></p>
<div class="fragment"><div class="line">Current Source ON</div>
<div class="line">[Polarity = negative] AND [AC_N &lt; 75% of Vout]</div>
<div class="line">[Polarity = positive] AND [AC_N &gt; 64V] </div>
<div class="line">(@HV: 64V ≙ 500digit) </div>
<div class="line">(@LV: 13V ≙ 500digit)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">Current Source OFF</div>
<div class="line">[Polarity = negative] AND [AC_N &gt; 75% of Vout]</div>
<div class="line">[Polarity = positive] AND [AC_N &lt; 64V] </div>
<div class="line">(@HV: 64V ≙ 500digit) </div>
<div class="line">(@LV: 13V ≙ 500digit)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md28"></a>
PFC Waveforms</h1>
<h2>PFC Startup</h2>
<p>On startup, PFC precharges the output caps, and then maintains an output voltage by periodically turning on the fast switching legs in Burst Mode</p>
<center></center><center></center><center> <a href="images/pfc_start_no_load.png" target="_blank" rel="nofollow"><img src="images/pfc_start_no_load.png" alt="Burst Mode" width="800" class="inline"/> </a></center><center>&#160;</center><center><a href="images/waiting_for_start.png" target="_blank" rel="nofollow"><img src="images/waiting_for_start.png" alt="Burst Mode" width="800" class="inline"/> </a> </center><center></center><center></center> <center>  <b> PFC at Startup with no load. AS soon as the reference output voltage is acheived, the PFC starts working in burst mode to maintain the output voltage. </b>  </center> <h2>PFC reaction to load transients</h2>
<center> <a href="images/load_transient_turning_on.png" target="_blank" rel="nofollow"><img src="images/load_transient_turning_on.png" alt="load transient turning off" width="800" class="inline"/> </a> </center> <center>  <b> PFC Load Transient during turning on. Channel C6 Output Voltage is AC coupled. </b>  </center> <center> <a href="images/load_transient_turning_off_3.png" target="_blank" rel="nofollow"><img src="images/load_transient_turning_off_3.png" alt="load transient turning off" width="800" class="inline"/> </a> </center> <center>  <b> PFC Load Transient during turning off. Channel C6 Output Voltage is AC coupled. </b>  </center> <h2>PFC Interleaved</h2>
<center> </center><center> <a href="images/interleaved/interleaved_normal.png" target="_blank" rel="nofollow"><img src="images/interleaved/interleaved_normal.png" alt="zerocross" width="800" class="inline"/> </a> &#160; <a href="images/interleaved/interleaved_normal_one.png" target="_blank" rel="nofollow"><img src="images/interleaved/interleaved_normal_one.png" alt="" width="800" class="inline"/> </a> </center> <center>  <b> Interleaved Operation </b>  </center> <center> </center><center> <a href="images/interleaved/interleaved_normal_two.png" target="_blank" rel="nofollow"><img src="images/interleaved/interleaved_normal_two.png" alt="zerocross" width="800" class="inline"/> </a> </center> <center>  <b> Interleaved Operation Zoomed in to show how the PWM interleaving works </b>  </center> <h1><a class="anchor" id="autotoc_md29"></a>
Grid Tied Inverter Waveforms</h1>
<center> </center><center> <a href="images/GTI/GTI_waveform.png" target="_blank" rel="nofollow"><img src="images/GTI/GTI_waveform.png" alt="GTI" width="800" class="inline"/> </a> </center> <center>  <b> Grid Tied Inverter Current and Voltage Waveforms </b>  </center> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath" style="padding-bottom: 12px; vertical-align: bottom;"><!-- id is needed for treeview function! -->
  <ul>
    <p class="footer" style="text-align: center; font-size: 90%;">
      © Copyright 1998-2022 Microchip Technology Inc. All rights reserved.
    </p>
    </ul>
</div>
</body>
</html>
