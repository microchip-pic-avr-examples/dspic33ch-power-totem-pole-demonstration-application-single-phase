<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>3.8/7.6 kw Totem pole Demonstration Application: Smps-2p2z-dspic-description</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mchp.css" rel="stylesheet" type="text/css"/>
<link href="mchp_theme.css" rel="stylesheet" type="text/css"/>
<link href="search.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="border:0px; border-spacing: 0px; border-collapse: collapse; vertical-align: middle; width: 100%;">
    <tbody>
        <tr style="border: none; background-color: #00000000;">
            <!--SITE HEADER-->
            <td style="width: 120px; border: none;">
                <img alt="Bar" height="60px" src="images/mchp-brandingelement-rgb2.png"/>
            </td>
            <td style="width: 220px; border: none;">
                <img alt="Logo" height=50px src="images/microchip.png"/>
            </td>
            <td colspan="4" style="font-size: 16pt; font-weight: bolder;">
                3.8/7.6 kw Totem pole Demonstration Application (Part-No. (not specified)) 
            </td>
            <td style="text-align: right; vertical-align: middle;">
                        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
            </td>
            <!--END SITE HEADER-->
        </tr>
        <tr style="height:36px; border:none; background-color: #000000b0;">
            <td style="width: 70px; color: white; font-size:14px; font-weight: bolder; margin-left: 30px;">
                <div style="margin-left: 30px;">Content</div>
            </td>
            <td style="width: 10px; color: white; font-size:14px; font-weight: bolder;">
                &nbsp;
            </td>
            <td style="width: 100px; color: white; font-size:14px; font-weight: bolder;">
                <!-- Overview -->
            </td>
            <td style="width: 130px; color: white; font-size:14px; font-weight: bolder;"> 
                <!-- Documentation -->
            </td>
            <td style="width: 170px; color: white; font-size:14px; font-weight: bolder;"> 
                <!-- Additional Resources -->
            </td>
            <td style="width: auto; color: white; font-size:14px; font-weight: bolder;"> 
              &nbsp;
            </td>
            <td style="width: 310px; margin-right: 30px; color: white; font-size:10px; font-weight: lighter; text-align: right;">
                &nbsp;
            </td>
        </tr>
    </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('a00398.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Smps-2p2z-dspic-description<div class="ingroups"><a class="el" href="a00403.html">Hide-content</a></div></div></div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Smps-2p2z-dspic-description:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00398.svg" width="344" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<p>Operation:</p>
<div class="fragment"><div class="line">                                          Wcp0   ( S + Wcz1 )               </div>
<div class="line">  Calculate the transfer function Hc(s) = ---- X ------------------------   </div>
<div class="line">                                           S     ( S + Wcp1 )( S + Wcp2 )   </div>
<div class="line">                                           </div>
<div class="line">    Error Normalization</div>
<div class="line">      ------------</div>
<div class="line">     |   prsft    |</div>
<div class="line">      ------------</div>
<div class="line">Reference   |       e(n)          e(n-1)        e(n-2)</div>
<div class="line">Input       |             --------      --------</div>
<div class="line">        -   -   -        |        |    |        |</div>
<div class="line">  o----|-|-|x|-|x|----o-&gt;| z^(-1) |-o-&gt;| z^(-1) |-o          Post</div>
<div class="line">        -   -   -     |  |        | |  |        | |         Scaling</div>
<div class="line">        |      NORM   |   --------  |   --------  |</div>
<div class="line">        |             |             |             |          --------</div>
<div class="line">Measured|            ---           ---           ---       |          |     - - - - - - - - - -</div>
<div class="line">Input   |       B0=&gt;| X |     B1=&gt;| X |     B2=&gt;| X |      |posft     |    |                   |</div>
<div class="line">        |            ---           ---           ---       |postScalar|    |     P O W E R     |</div>
<div class="line">        |             |             |             |         ----------     |     P L A N T     |</div>
<div class="line">        |            -------------------------------------        |        |                   |</div>
<div class="line">        |           |                                     | U[n] ---       |                   |</div>
<div class="line">        |           |        A C C U M U L A T O R        |--o--| X |------O Duty Ratio=&gt;PWM  |</div>
<div class="line">        |           |                                     |  |   ---       |                   |</div>
<div class="line">        |            -------------------------------------   |             | Voltage/Current   |</div>
<div class="line">        |             |              |                       |             |      Feedback     |</div>
<div class="line">        |            ---            ---                      |             |         O         |</div>
<div class="line">        |       A2=&gt;| X |      A1=&gt;| X |                     |             |         |         |</div>
<div class="line">        |            ---            ---                      |              - - - - - - - - - -</div>
<div class="line">        |             |              |                       |                      |</div>
<div class="line">        |             |   --------   |  --------             |                      | A/D</div>
<div class="line">        |             |  |        |  | |        |            |                      | Input</div>
<div class="line">        |             o--| z^(-1) |&lt;-o-| z^(-1) |&lt;-----------                       |</div>
<div class="line">        |                |        |    |        |                                   |</div>
<div class="line">        |                 --------      --------                                    |</div>
<div class="line">        |                  u[n-2]        u[n-1]                                     |</div>
<div class="line">        |                                                                           |</div>
<div class="line">        |                                                                           |</div>
<div class="line">         ---------------------------------------------------------------------------</div>
<div class="line"> </div>
<div class="line">   controlHistory[n] = errorHistory[n]   * bCoefficients[0]</div>
<div class="line">                     + errorHistory[n-1] * bCoefficients[1]</div>
<div class="line">                     + errorHistory[n-2] * bCoefficients[2]</div>
<div class="line">                     + controlHistory[n-1] * aCoefficients[0]</div>
<div class="line">                     + controlHistory[n-2] * aCoefficients[1]</div>
<div class="line"> </div>
<div class="line">  where:</div>
<div class="line"> </div>
<div class="line">   aCoefficients[0]  = A1</div>
<div class="line">   aCoefficients[1]  = A2</div>
<div class="line">   bCoefficients[0]  = B0</div>
<div class="line">   bCoefficients[1]  = B1</div>
<div class="line">   bCoefficients[2]  = B2</div>
<div class="line">   controlHistory[0] = u(n)</div>
<div class="line">   controlHistory[1] = u(n-1)</div>
<div class="line">   errorHistory[0]   = e(n) =&gt; most recent error {(controlReference) - (sourceRegister)}</div>
<div class="line">   errorHistory[1]   = e(n-1)</div>
<div class="line">   errorHistory[2]   = e(n-2)</div>
<div class="line">   preShift          = prsft    =&gt; pre scaling factor for Q15 normalization purposes</div>
<div class="line">   postShift         = posft    =&gt; post scaling factor for normalization purposes</div>
<div class="line">   postScaler        = postScaler =&gt; post scaling coefficient for normalization purpose</div>
<div class="line"> </div>
<div class="line">   Function call inputs:</div>
<div class="line">   sourceRegister    = ADBUFx  =&gt; measured feedback input   </div>
<div class="line">   controlReference  = V_ref    =&gt; reference voltage</div>
<div class="line">   targetRegister = PDCx =&gt; output duty cycle</div>
<div class="line"> </div>
<div class="line">  where:</div>
<div class="line"> </div>
<div class="line">   aCoefficients, bCoefficients, controlHistory, errorHistory, </div>
<div class="line">   preShift and postShift are all members of the data structure <a class="code hl_struct" href="a00695.html">SMPS_2P2Z_T</a>.</div>
<div class="line"> </div>
<div class="line"> Input:</div>
<div class="line">       w0 = Address of <a class="code hl_struct" href="a00695.html">SMPS_2P2Z_T</a> data structure</div>
<div class="line">       w1 = Address of the Source Register (Input)</div>
<div class="line">       w2 = Control Reference</div>
<div class="line">       w3 = Address of the Target Register (Output)</div>
<div class="line"> Return:</div>
<div class="line">       w0 = Address of <a class="code hl_struct" href="a00695.html">SMPS_2P2Z_T</a> data structure</div>
<div class="line">       w1 = Address of the Source Register (Input)</div>
<div class="line">       w2 = Control Reference</div>
<div class="line">       w3 = Address of the Target Register (Output)</div>
<div class="line"> </div>
<div class="line"> System resources usage:</div>
<div class="line">       {w4..w5}        saved, used, restored</div>
<div class="line">       {w8,w10}        saved, used, restored</div>
<div class="line">        AccA           used, not restored</div>
<div class="line">        CORCON         saved, used, restored</div>
<div class="ttc" id="aa00695_html"><div class="ttname"><a href="a00695.html">SMPS_2P2Z_T</a></div><div class="ttdef"><b>Definition</b> <a href="a00380_source.html#l00166">smps_control.h:167</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The function in this assembly file requires CORCON register to be setup in a certain state in order to operate correctly. Due to this requirement, this function will save the CORCON register on the stack in the beginning of the function and restore it before the function return. After saving the CORCON register, this function writes to all bits of the CORCON register. Thus, for the brief duration when this function is executing, the state of CORCON register may be different from its state as set by the function caller. This may change the CPU core behaviour with respect to exception processing latency, DO loop termination, CPU interrupt priority level and DSP-engine behaviour. </dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath" style="padding-bottom: 12px; vertical-align: bottom;"><!-- id is needed for treeview function! -->
  <ul>
    <p class="footer" style="text-align: center; font-size: 90%;">
      © Copyright 1998-2022 Microchip Technology Inc. All rights reserved.
    </p>
    </ul>
</div>
</body>
</html>
