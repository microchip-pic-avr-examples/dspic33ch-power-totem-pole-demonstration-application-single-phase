<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>3.8/7.6 kw Totem pole Demonstration Application: C:/Users/M70027/Documents/Projects/tp-deployment/dspic33ch-power-totem-pole-demonstration-application-single-phase_v2/dspic33ch_totem_pole_single_phase_primary_IL.X/sources/driver/i2c/drv_i2c.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mchp.css" rel="stylesheet" type="text/css"/>
<link href="mchp_theme.css" rel="stylesheet" type="text/css"/>
<link href="search.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="border:0px; border-spacing: 0px; border-collapse: collapse; vertical-align: middle; width: 100%;">
    <tbody>
        <tr style="border: none; background-color: #00000000;">
            <!--SITE HEADER-->
            <td style="width: 120px; border: none;">
                <img alt="Bar" height="60px" src="images/mchp-brandingelement-rgb2.png"/>
            </td>
            <td style="width: 220px; border: none;">
                <img alt="Logo" height=50px src="images/microchip.png"/>
            </td>
            <td colspan="4" style="font-size: 16pt; font-weight: bolder;">
                3.8/7.6 kw Totem pole Demonstration Application (Part-No. (not specified)) 
            </td>
            <td style="text-align: right; vertical-align: middle;">
                        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
            </td>
            <!--END SITE HEADER-->
        </tr>
        <tr style="height:36px; border:none; background-color: #000000b0;">
            <td style="width: 70px; color: white; font-size:14px; font-weight: bolder; margin-left: 30px;">
                <div style="margin-left: 30px;">Content</div>
            </td>
            <td style="width: 10px; color: white; font-size:14px; font-weight: bolder;">
                &nbsp;
            </td>
            <td style="width: 100px; color: white; font-size:14px; font-weight: bolder;">
                <!-- Overview -->
            </td>
            <td style="width: 130px; color: white; font-size:14px; font-weight: bolder;"> 
                <!-- Documentation -->
            </td>
            <td style="width: 170px; color: white; font-size:14px; font-weight: bolder;"> 
                <!-- Additional Resources -->
            </td>
            <td style="width: auto; color: white; font-size:14px; font-weight: bolder;"> 
              &nbsp;
            </td>
            <td style="width: 310px; margin-right: 30px; color: white; font-size:10px; font-weight: lighter; text-align: right;">
                &nbsp;
            </td>
        </tr>
    </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('a00239_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">drv_i2c.c</div></div>
</div><!--header-->
<div class="contents">
<a href="a00239.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">/*</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">    (c) 2022 Microchip Technology Inc. and its subsidiaries. You may use this</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">    software and any derivatives exclusively with Microchip products.</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"></span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">    THIS SOFTWARE IS SUPPLIED BY MICROCHIP &quot;AS IS&quot;. NO WARRANTIES, WHETHER</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">    EXPRESS, IMPLIED OR STATUTORY, APPLY TO THIS SOFTWARE, INCLUDING ANY IMPLIED</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">    WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY, AND FITNESS FOR A</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">    PARTICULAR PURPOSE, OR ITS INTERACTION WITH MICROCHIP PRODUCTS, COMBINATION</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">    WITH ANY OTHER PRODUCTS, OR USE IN ANY APPLICATION.</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment"></span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment">    IN NO EVENT WILL MICROCHIP BE LIABLE FOR ANY INDIRECT, SPECIAL, PUNITIVE,</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">    INCIDENTAL OR CONSEQUENTIAL LOSS, DAMAGE, COST OR EXPENSE OF ANY KIND</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">    WHATSOEVER RELATED TO THE SOFTWARE, HOWEVER CAUSED, EVEN IF MICROCHIP HAS</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="comment">    BEEN ADVISED OF THE POSSIBILITY OR THE DAMAGES ARE FORESEEABLE. TO THE</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">    FULLEST EXTENT ALLOWED BY LAW, MICROCHIP&#39;S TOTAL LIABILITY ON ALL CLAIMS IN</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="comment">    ANY WAY RELATED TO THIS SOFTWARE WILL NOT EXCEED THE AMOUNT OF FEES, IF ANY,</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment">    THAT YOU HAVE PAID DIRECTLY TO MICROCHIP FOR THIS SOFTWARE.</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment"></span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="comment">    MICROCHIP PROVIDES THIS SOFTWARE CONDITIONALLY UPON YOUR ACCEPTANCE OF THESE</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="comment">    TERMS.</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="comment"> */</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;xc.h&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="a00242.html">drv_i2c.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="a00230.html">driver/can/drv_can.h</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="comment">// MCC header files</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;i2c2.h&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;system/pins.h&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="comment">// create I2C write object, initialize each member to be in fault state</span></div>
<div class="foldopen" id="foldopen00042" data-start="{" data-end="};">
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="a00239.html#a7bce840e9f437589828622271c643d3b">   42</a></span><span class="keyword">static</span> <a class="code hl_struct" href="a00555.html">I2C_t</a> <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a> = {</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>  .frame.bytes.aux_fault_flags.bits._5v = 1,</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>  .frame.bytes.aux_fault_flags.bits._12v = 1,</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>  .frame.bytes.aux_fault_flags.bits._24v = 1,</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>  .frame.bytes.sic_status_flags.bits.sic1 = 3,</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>  .frame.bytes.sic_status_flags.bits.sic2 = 3,</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>  .frame.bytes.sic_status_flags.bits.sic3 = 3,</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>  .frame.bytes.sic_status_flags.bits.sic4 = 3</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>};</div>
</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="a00239.html#ae86c0a35e837e59ed1481a59c8848c07">   52</a></span><span class="keyword">static</span> uint8_t <a class="code hl_variable" href="a00239.html#ae86c0a35e837e59ed1481a59c8848c07">i2c2_slaveWriteData</a> = 0xAA; <span class="comment">// holds byte written to slave</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="comment">// local function declarations</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="a00239.html#aabc0f58aefa79d991414857fb55fca50">i2c_crc_update</a>(uint8_t data, <span class="keyword">struct</span> <a class="code hl_struct" href="a00555.html">I2C_s</a>* i2c_obj);</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="foldopen" id="foldopen00068" data-start="{" data-end="}">
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="a00426.html#ga5fe2662b714b85fd1b430cf48528c656">   68</a></span><a class="code hl_struct" href="a00555.html">I2C_t</a> <a class="code hl_function" href="a00426.html#ga5fe2662b714b85fd1b430cf48528c656">Drv_I2C_Get_Write_Data</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>{</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>  <span class="keywordflow">return</span> (<a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>);</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>}</div>
</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="foldopen" id="foldopen00082" data-start="{" data-end="}">
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="a00239.html#a8f9f48d98b4152752f96416867322830">   82</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="a00239.html#a8f9f48d98b4152752f96416867322830">I2C2_StatusCallback</a>(I2C2_SLAVE_DRIVER_STATUS <a class="code hl_variable" href="a00323.html#a64efe43f4fb2f2da8fdadf1440801df1">status</a>)</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>{</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  <span class="keyword">static</span> uint16_t byteCount;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  <span class="keywordflow">switch</span> (<a class="code hl_variable" href="a00323.html#a64efe43f4fb2f2da8fdadf1440801df1">status</a>)</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  {</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="keywordflow">case</span> I2C2_SLAVE_TRANSMIT_REQUEST_DETECTED:</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>      <span class="comment">// set up the slave driver buffer transmit pointer</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>      I2C2_ReadPointerSet(&amp;<a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#a61fbc0496924e18b1abc7faa2819448b">frame</a>.<a class="code hl_variable" href="a00543.html#a1d8963801eddda0c47cd9e18fd7045da">array</a>[byteCount++]);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>      <span class="keywordflow">if</span> (byteCount &gt;= <a class="code hl_define" href="a00242.html#a9d70b7d225632bfc75ea4b9329ecf16a">I2C_WRITE_BUFFER_SIZE</a>)</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>      {</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        byteCount = 0;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>      }</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="keywordflow">case</span> I2C2_SLAVE_RECEIVE_REQUEST_DETECTED:</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>      <span class="comment">// address of slave matches address in I2C message transmitted </span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>      <span class="comment">// from I2C master</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>      byteCount = 0;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>      <span class="comment">// clear status flags</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>      <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#a6248f7b805579379a087ffb8212e0499">status</a>.<a class="code hl_variable" href="a00507.html#a5ac880ce37fbe7c6640eaf0b90f109ec">bits</a>.<a class="code hl_variable" href="a00507.html#a3041fe08ed5976302158f2668249f8b2">done</a> = 0;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>      <span class="comment">// clear timeout flag and counter</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>      <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#a6248f7b805579379a087ffb8212e0499">status</a>.<a class="code hl_variable" href="a00507.html#a5ac880ce37fbe7c6640eaf0b90f109ec">bits</a>.<a class="code hl_variable" href="a00507.html#ab4fcc504ef4f0ecdbec52ebfc265634b">timeout</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>      <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#ac530d8716ffac3ed783b74131ce01ea5">timeout_counter</a> = 0;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>      <span class="comment">// set up the slave driver buffer receive pointer</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>      I2C2_WritePointerSet(&amp;<a class="code hl_variable" href="a00239.html#ae86c0a35e837e59ed1481a59c8848c07">i2c2_slaveWriteData</a>);</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>      <span class="comment">// start CRC calculation</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>      <span class="comment">// first clear CRC byte</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>      <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#ab737b9992427f6e30af5b3846d48b66d">crc</a> = 0;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span> </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>      <span class="comment">// read first byte written from I2C master</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>      <span class="comment">// this should be the address, left shifted by 1 bit, plus the </span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>      <span class="comment">// read/write bit in bit position 0 (read/write bit = 0) in this </span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>      <span class="comment">// case as I2C master is writing to I2C slave</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>      <span class="keyword">volatile</span> uint8_t i2c_rcv = (uint8_t) I2C2RCV;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>      <a class="code hl_function" href="a00239.html#aabc0f58aefa79d991414857fb55fca50">i2c_crc_update</a>(i2c_rcv, &amp;<a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>);</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span> </div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="keywordflow">case</span> I2C2_SLAVE_RECEIVED_DATA_DETECTED:</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>      <span class="comment">// receiving non-address data          </span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>      <span class="comment">// update CRC</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>      <a class="code hl_function" href="a00239.html#aabc0f58aefa79d991414857fb55fca50">i2c_crc_update</a>(<a class="code hl_variable" href="a00239.html#ae86c0a35e837e59ed1481a59c8848c07">i2c2_slaveWriteData</a>, &amp;<a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>      <span class="comment">// check if command byte is valid </span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>      <span class="comment">// (cmd byte = first byte received after address byte)</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>      <span class="keywordflow">if</span> (byteCount == 0)</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>      {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="comment">// first byte should be a valid command byte</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="a00239.html#ae86c0a35e837e59ed1481a59c8848c07">i2c2_slaveWriteData</a> != <a class="code hl_define" href="a00242.html#a3f37ce963fc306ec6d776b32eaa47866">CMD_SEND_COMBINED_STATUS_DATA</a>)</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        {</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>          <span class="comment">// error, command byte is not correct</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>          <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#a6248f7b805579379a087ffb8212e0499">status</a>.<a class="code hl_variable" href="a00507.html#a5ac880ce37fbe7c6640eaf0b90f109ec">bits</a>.<a class="code hl_variable" href="a00507.html#a3373d3a55c2d29d56f31cbe799a2c38c">cmd_ok</a> = 0;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        }</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        {</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>          <span class="comment">// command byte is as expected</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>          <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#a6248f7b805579379a087ffb8212e0499">status</a>.<a class="code hl_variable" href="a00507.html#a5ac880ce37fbe7c6640eaf0b90f109ec">bits</a>.<a class="code hl_variable" href="a00507.html#a3373d3a55c2d29d56f31cbe799a2c38c">cmd_ok</a> = 1;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        }</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>      }</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>      <span class="comment">// fill buffer with received data</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>      <span class="keywordflow">if</span> (byteCount &lt; <a class="code hl_define" href="a00242.html#a9d70b7d225632bfc75ea4b9329ecf16a">I2C_WRITE_BUFFER_SIZE</a>)</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>      {</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#a61fbc0496924e18b1abc7faa2819448b">frame</a>.<a class="code hl_variable" href="a00543.html#a1d8963801eddda0c47cd9e18fd7045da">array</a>[byteCount] = <a class="code hl_variable" href="a00239.html#ae86c0a35e837e59ed1481a59c8848c07">i2c2_slaveWriteData</a>;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>      }</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>      byteCount++;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="keywordflow">case</span> I2C2_SLAVE_10BIT_RECEIVE_REQUEST_DETECTED:</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>      <span class="comment">// 10-bit address is detected           </span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="keywordflow">case</span> I2C2_SLAVE_STOP_BIT_DETECTED:</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>      <span class="comment">// finished processing this message</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>      <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#a6248f7b805579379a087ffb8212e0499">status</a>.<a class="code hl_variable" href="a00507.html#a5ac880ce37fbe7c6640eaf0b90f109ec">bits</a>.<a class="code hl_variable" href="a00507.html#a3041fe08ed5976302158f2668249f8b2">done</a> = 1;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>      <span class="comment">// CRC check, all going well the CRC should be zero at this point</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#ab737b9992427f6e30af5b3846d48b66d">crc</a> == 0)</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>      {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#a6248f7b805579379a087ffb8212e0499">status</a>.<a class="code hl_variable" href="a00507.html#a5ac880ce37fbe7c6640eaf0b90f109ec">bits</a>.<a class="code hl_variable" href="a00507.html#adff027d454cd6e34e27a30d35c540ca9">pec_ok</a> = 1;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>      }</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>      <span class="keywordflow">else</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>      {</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#a6248f7b805579379a087ffb8212e0499">status</a>.<a class="code hl_variable" href="a00507.html#a5ac880ce37fbe7c6640eaf0b90f109ec">bits</a>.<a class="code hl_variable" href="a00507.html#adff027d454cd6e34e27a30d35c540ca9">pec_ok</a> = 0;</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>      }</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span> </div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  }</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>}</div>
</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span> </div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span><span class="comment">// look up table for CRC8 with polynomial 0x07 (used for SMBus PEC)</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen00189" data-start="{" data-end="};">
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno"><a class="line" href="a00239.html#a61f1e49b7857e878d54e0fde2abd3b5b">  189</a></span><span class="keyword">const</span> uint8_t <a class="code hl_variable" href="a00239.html#a61f1e49b7857e878d54e0fde2abd3b5b">crc_lut</a>[256] = {0x00, 0x07, 0x0E, 0x09, 0x1C, 0x1B, 0x12, 0x15, 0x38, 0x3F, 0x36, 0x31, 0x24, 0x23, 0x2A, 0x2D,</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>  0x70, 0x77, 0x7E, 0x79, 0x6C, 0x6B, 0x62, 0x65, 0x48, 0x4F, 0x46, 0x41, 0x54, 0x53, 0x5A, 0x5D,</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>  0xE0, 0xE7, 0xEE, 0xE9, 0xFC, 0xFB, 0xF2, 0xF5, 0xD8, 0xDF, 0xD6, 0xD1, 0xC4, 0xC3, 0xCA, 0xCD,</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>  0x90, 0x97, 0x9E, 0x99, 0x8C, 0x8B, 0x82, 0x85, 0xA8, 0xAF, 0xA6, 0xA1, 0xB4, 0xB3, 0xBA, 0xBD,</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>  0xC7, 0xC0, 0xC9, 0xCE, 0xDB, 0xDC, 0xD5, 0xD2, 0xFF, 0xF8, 0xF1, 0xF6, 0xE3, 0xE4, 0xED, 0xEA,</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  0xB7, 0xB0, 0xB9, 0xBE, 0xAB, 0xAC, 0xA5, 0xA2, 0x8F, 0x88, 0x81, 0x86, 0x93, 0x94, 0x9D, 0x9A,</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  0x27, 0x20, 0x29, 0x2E, 0x3B, 0x3C, 0x35, 0x32, 0x1F, 0x18, 0x11, 0x16, 0x03, 0x04, 0x0D, 0x0A,</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>  0x57, 0x50, 0x59, 0x5E, 0x4B, 0x4C, 0x45, 0x42, 0x6F, 0x68, 0x61, 0x66, 0x73, 0x74, 0x7D, 0x7A,</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  0x89, 0x8E, 0x87, 0x80, 0x95, 0x92, 0x9B, 0x9C, 0xB1, 0xB6, 0xBF, 0xB8, 0xAD, 0xAA, 0xA3, 0xA4,</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  0xF9, 0xFE, 0xF7, 0xF0, 0xE5, 0xE2, 0xEB, 0xEC, 0xC1, 0xC6, 0xCF, 0xC8, 0xDD, 0xDA, 0xD3, 0xD4,</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>  0x69, 0x6E, 0x67, 0x60, 0x75, 0x72, 0x7B, 0x7C, 0x51, 0x56, 0x5F, 0x58, 0x4D, 0x4A, 0x43, 0x44,</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  0x19, 0x1E, 0x17, 0x10, 0x05, 0x02, 0x0B, 0x0C, 0x21, 0x26, 0x2F, 0x28, 0x3D, 0x3A, 0x33, 0x34,</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  0x4E, 0x49, 0x40, 0x47, 0x52, 0x55, 0x5C, 0x5B, 0x76, 0x71, 0x78, 0x7F, 0x6A, 0x6D, 0x64, 0x63,</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>  0x3E, 0x39, 0x30, 0x37, 0x22, 0x25, 0x2C, 0x2B, 0x06, 0x01, 0x08, 0x0F, 0x1A, 0x1D, 0x14, 0x13,</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  0xAE, 0xA9, 0xA0, 0xA7, 0xB2, 0xB5, 0xBC, 0xBB, 0x96, 0x91, 0x98, 0x9F, 0x8A, 0x8D, 0x84, 0x83,</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>  0xDE, 0xD9, 0xD0, 0xD7, 0xC2, 0xC5, 0xCC, 0xCB, 0xE6, 0xE1, 0xE8, 0xEF, 0xFA, 0xFD, 0xF4, 0xF3};</div>
</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="foldopen" id="foldopen00215" data-start="{" data-end="}">
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="a00239.html#aabc0f58aefa79d991414857fb55fca50">  215</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="a00239.html#aabc0f58aefa79d991414857fb55fca50">i2c_crc_update</a>(uint8_t data, <span class="keyword">struct</span> <a class="code hl_struct" href="a00555.html">I2C_s</a>* i2c_obj)</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>{</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  <span class="comment">// xor byte with crc</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  uint8_t xor_data_crc = (uint8_t) (data ^ i2c_obj-&gt;<a class="code hl_variable" href="a00555.html#ab737b9992427f6e30af5b3846d48b66d">crc</a>);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>  <span class="comment">// calculate CRC using LUT</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  i2c_obj-&gt;<a class="code hl_variable" href="a00555.html#ab737b9992427f6e30af5b3846d48b66d">crc</a> = (uint8_t) (<a class="code hl_variable" href="a00239.html#a61f1e49b7857e878d54e0fde2abd3b5b">crc_lut</a>[xor_data_crc]);</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>}</div>
</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="foldopen" id="foldopen00235" data-start="{" data-end="}">
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno"><a class="line" href="a00426.html#ga56112e634e1b04cd17dbe4d05905db9c">  235</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="a00426.html#ga56112e634e1b04cd17dbe4d05905db9c">Drv_I2C_Timeout</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>{</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>  <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#ac530d8716ffac3ed783b74131ce01ea5">timeout_counter</a>++;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#ac530d8716ffac3ed783b74131ce01ea5">timeout_counter</a> &gt; <a class="code hl_define" href="a00242.html#ace7c2373acffee9f06d7c1abd31b9064">I2C_TIMEOUT_IN_100us_TICKS</a>)</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>  {</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#ac530d8716ffac3ed783b74131ce01ea5">timeout_counter</a> = 0;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    <a class="code hl_variable" href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a>.<a class="code hl_variable" href="a00555.html#a6248f7b805579379a087ffb8212e0499">status</a>.<a class="code hl_variable" href="a00507.html#a5ac880ce37fbe7c6640eaf0b90f109ec">bits</a>.<a class="code hl_variable" href="a00507.html#ab4fcc504ef4f0ecdbec52ebfc265634b">timeout</a> = <span class="keyword">true</span>; <span class="comment">// set timeout flag</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  }</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>}</div>
</div>
<div class="ttc" id="aa00230_html"><div class="ttname"><a href="a00230.html">drv_can.h</a></div><div class="ttdoc">header of the CAN Driver</div></div>
<div class="ttc" id="aa00239_html_a61f1e49b7857e878d54e0fde2abd3b5b"><div class="ttname"><a href="a00239.html#a61f1e49b7857e878d54e0fde2abd3b5b">crc_lut</a></div><div class="ttdeci">const uint8_t crc_lut[256]</div><div class="ttdef"><b>Definition</b> <a href="#l00189">drv_i2c.c:189</a></div></div>
<div class="ttc" id="aa00239_html_a7bce840e9f437589828622271c643d3b"><div class="ttname"><a href="a00239.html#a7bce840e9f437589828622271c643d3b">i2c_write</a></div><div class="ttdeci">static I2C_t i2c_write</div><div class="ttdef"><b>Definition</b> <a href="#l00042">drv_i2c.c:42</a></div></div>
<div class="ttc" id="aa00239_html_a8f9f48d98b4152752f96416867322830"><div class="ttname"><a href="a00239.html#a8f9f48d98b4152752f96416867322830">I2C2_StatusCallback</a></div><div class="ttdeci">bool I2C2_StatusCallback(I2C2_SLAVE_DRIVER_STATUS status)</div><div class="ttdef"><b>Definition</b> <a href="#l00082">drv_i2c.c:82</a></div></div>
<div class="ttc" id="aa00239_html_aabc0f58aefa79d991414857fb55fca50"><div class="ttname"><a href="a00239.html#aabc0f58aefa79d991414857fb55fca50">i2c_crc_update</a></div><div class="ttdeci">static void i2c_crc_update(uint8_t data, struct I2C_s *i2c_obj)</div><div class="ttdef"><b>Definition</b> <a href="#l00215">drv_i2c.c:215</a></div></div>
<div class="ttc" id="aa00239_html_ae86c0a35e837e59ed1481a59c8848c07"><div class="ttname"><a href="a00239.html#ae86c0a35e837e59ed1481a59c8848c07">i2c2_slaveWriteData</a></div><div class="ttdeci">static uint8_t i2c2_slaveWriteData</div><div class="ttdef"><b>Definition</b> <a href="#l00052">drv_i2c.c:52</a></div></div>
<div class="ttc" id="aa00242_html"><div class="ttname"><a href="a00242.html">drv_i2c.h</a></div><div class="ttdoc">This is the driver header file for DMA driver.</div></div>
<div class="ttc" id="aa00242_html_a3f37ce963fc306ec6d776b32eaa47866"><div class="ttname"><a href="a00242.html#a3f37ce963fc306ec6d776b32eaa47866">CMD_SEND_COMBINED_STATUS_DATA</a></div><div class="ttdeci">#define CMD_SEND_COMBINED_STATUS_DATA</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00048">drv_i2c.h:48</a></div></div>
<div class="ttc" id="aa00242_html_a9d70b7d225632bfc75ea4b9329ecf16a"><div class="ttname"><a href="a00242.html#a9d70b7d225632bfc75ea4b9329ecf16a">I2C_WRITE_BUFFER_SIZE</a></div><div class="ttdeci">#define I2C_WRITE_BUFFER_SIZE</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00045">drv_i2c.h:45</a></div></div>
<div class="ttc" id="aa00242_html_ace7c2373acffee9f06d7c1abd31b9064"><div class="ttname"><a href="a00242.html#ace7c2373acffee9f06d7c1abd31b9064">I2C_TIMEOUT_IN_100us_TICKS</a></div><div class="ttdeci">#define I2C_TIMEOUT_IN_100us_TICKS</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00054">drv_i2c.h:54</a></div></div>
<div class="ttc" id="aa00323_html_a64efe43f4fb2f2da8fdadf1440801df1"><div class="ttname"><a href="a00323.html#a64efe43f4fb2f2da8fdadf1440801df1">status</a></div><div class="ttdeci">size_t status</div><div class="ttdef"><b>Definition</b> <a href="a00323_source.html#l00099">uart1.c:99</a></div></div>
<div class="ttc" id="aa00426_html_ga56112e634e1b04cd17dbe4d05905db9c"><div class="ttname"><a href="a00426.html#ga56112e634e1b04cd17dbe4d05905db9c">Drv_I2C_Timeout</a></div><div class="ttdeci">void Drv_I2C_Timeout(void)</div><div class="ttdoc">check if I2C timeout has occurred (no I2C message for I2C_TIMEOUT_IN_100us_TICKS seconds)</div><div class="ttdef"><b>Definition</b> <a href="#l00235">drv_i2c.c:235</a></div></div>
<div class="ttc" id="aa00426_html_ga5fe2662b714b85fd1b430cf48528c656"><div class="ttname"><a href="a00426.html#ga5fe2662b714b85fd1b430cf48528c656">Drv_I2C_Get_Write_Data</a></div><div class="ttdeci">I2C_t Drv_I2C_Get_Write_Data(void)</div><div class="ttdoc">read copy of i2c_write object</div><div class="ttdef"><b>Definition</b> <a href="#l00068">drv_i2c.c:68</a></div></div>
<div class="ttc" id="aa00507_html_a3041fe08ed5976302158f2668249f8b2"><div class="ttname"><a href="a00507.html#a3041fe08ed5976302158f2668249f8b2">I2C_STATUS_s::done</a></div><div class="ttdeci">volatile bool done</div><div class="ttdoc">Bit #2: flag indicating that I2C module is finished processing this message.</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00067">drv_i2c.h:67</a></div></div>
<div class="ttc" id="aa00507_html_a3373d3a55c2d29d56f31cbe799a2c38c"><div class="ttname"><a href="a00507.html#a3373d3a55c2d29d56f31cbe799a2c38c">I2C_STATUS_s::cmd_ok</a></div><div class="ttdeci">volatile bool cmd_ok</div><div class="ttdoc">Bit #0: flag indicating the validity of the command byte.</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00065">drv_i2c.h:65</a></div></div>
<div class="ttc" id="aa00507_html_a5ac880ce37fbe7c6640eaf0b90f109ec"><div class="ttname"><a href="a00507.html#a5ac880ce37fbe7c6640eaf0b90f109ec">I2C_STATUS_s::bits</a></div><div class="ttdeci">struct I2C_STATUS_s::@3::@5 bits</div></div>
<div class="ttc" id="aa00507_html_ab4fcc504ef4f0ecdbec52ebfc265634b"><div class="ttname"><a href="a00507.html#ab4fcc504ef4f0ecdbec52ebfc265634b">I2C_STATUS_s::timeout</a></div><div class="ttdeci">volatile bool timeout</div><div class="ttdoc">Bit #3: flag indicating that I2C message has not been received withing timeout period.</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00068">drv_i2c.h:68</a></div></div>
<div class="ttc" id="aa00507_html_adff027d454cd6e34e27a30d35c540ca9"><div class="ttname"><a href="a00507.html#adff027d454cd6e34e27a30d35c540ca9">I2C_STATUS_s::pec_ok</a></div><div class="ttdeci">volatile bool pec_ok</div><div class="ttdoc">Bit #1: flag indicating PEC error (CRC error in datastream)</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00066">drv_i2c.h:66</a></div></div>
<div class="ttc" id="aa00543_html_a1d8963801eddda0c47cd9e18fd7045da"><div class="ttname"><a href="a00543.html#a1d8963801eddda0c47cd9e18fd7045da">SIC_CLIENT_RECEIVE_FRAME_s::array</a></div><div class="ttdeci">uint8_t array[I2C_WRITE_BUFFER_SIZE]</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00126">drv_i2c.h:126</a></div></div>
<div class="ttc" id="aa00555_html"><div class="ttname"><a href="a00555.html">I2C_s</a></div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00131">drv_i2c.h:131</a></div></div>
<div class="ttc" id="aa00555_html_a61fbc0496924e18b1abc7faa2819448b"><div class="ttname"><a href="a00555.html#a61fbc0496924e18b1abc7faa2819448b">I2C_s::frame</a></div><div class="ttdeci">SIC_CLIENT_RECEIVE_FRAME_t frame</div><div class="ttdoc">buffer to store I2C data</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00133">drv_i2c.h:133</a></div></div>
<div class="ttc" id="aa00555_html_a6248f7b805579379a087ffb8212e0499"><div class="ttname"><a href="a00555.html#a6248f7b805579379a087ffb8212e0499">I2C_s::status</a></div><div class="ttdeci">I2C_STATUS_t status</div><div class="ttdoc">status flags</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00132">drv_i2c.h:132</a></div></div>
<div class="ttc" id="aa00555_html_ab737b9992427f6e30af5b3846d48b66d"><div class="ttname"><a href="a00555.html#ab737b9992427f6e30af5b3846d48b66d">I2C_s::crc</a></div><div class="ttdeci">uint8_t crc</div><div class="ttdoc">running crc</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00134">drv_i2c.h:134</a></div></div>
<div class="ttc" id="aa00555_html_ac530d8716ffac3ed783b74131ce01ea5"><div class="ttname"><a href="a00555.html#ac530d8716ffac3ed783b74131ce01ea5">I2C_s::timeout_counter</a></div><div class="ttdeci">uint16_t timeout_counter</div><div class="ttdef"><b>Definition</b> <a href="a00242_source.html#l00135">drv_i2c.h:135</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath" style="padding-bottom: 12px; vertical-align: bottom;"><!-- id is needed for treeview function! -->
  <ul>
    <p class="footer" style="text-align: center; font-size: 90%;">
       Copyright 1998-2022 Microchip Technology Inc. All rights reserved.
    </p>
    </ul>
</div>
</body>
</html>
